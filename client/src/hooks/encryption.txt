import React, { useContext, useEffect, useState } from "react";
import { useHttp } from "./http.hook.js";


export const encrypted = () => {

  // const { request } = useHttp();

  // const { token } = useAuth();
  // console.log("token: ", token);
  // let token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyNGI1M2EyZmMzZmEyZmU5OGQ2Mzc5NCIsInJvbGVfdXNlciI6W251bGxdLCJpYXQiOjE2NTE5MTQ5MzgsImV4cCI6MTY1MTkyNTczOH0.6DnP1suWcG5Pk52AoBnm6DEW1w-bUMC6VcdQG4D8zgI";
  let request;
  let my_user_ID;
  
  
  window.localStorage.setItem("loginToken", request.token);

  let JWTPayloadB64 = request.token.split(".")[1];
  let JWTPayloadSTR = decodeURIComponent(escape(window.atob(JWTPayloadB64)));
  let JWTPayloadJSON = JSON.parse(JWTPayloadSTR);

  console.log(JWTPayloadB64, "->", JWTPayloadSTR, "->", JWTPayloadJSON);
  // Для дальнейшего удобства сохраняем тип нашего пользователя
  window.localStorage.setItem("loginType", JWTPayloadJSON.user_type);

  // Сохраняем наш токен, чтобы в дальнейшем прикладывать его к нашим запросам, как удостоверение
  window.localStorage.setItem("loginToken", request.token);

  // return {my_user_ID}
};
